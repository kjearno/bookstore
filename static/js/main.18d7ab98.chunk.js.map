{"version":3,"sources":["components/ScrollToTop.js","components/Redirector/index.jsx","assets/cart.svg","components/Header/Controls.jsx","components/Header/Logo.jsx","components/Header/index.jsx","components/templates/CommonTemplate.jsx","assets/banner.png","components/Announcement/index.jsx","shared/constants/requestStatus.js","shared/lib/focusDetector/index.js","shared/lib/axios.js","features/entities/books/lib/limitDescription.js","features/entities/books/booksSlice.js","features/entities/categories/categoriesSlice.js","features/entities/index.js","features/category/selectors.js","features/category/categorySlice.js","components/Pagination/index.jsx","features/category/hooks/useCategory.js","features/cart/selectors.js","features/cart/cartSlice.js","components/Loader/index.jsx","features/cart/hooks/useCart.js","features/cart/components/CartTable/Product.jsx","features/cart/hooks/useProduct.js","features/cart/components/CartTable/index.jsx","components/Book/index.jsx","features/cart/hooks/useItem.js","components/Book/Loader.jsx","features/category/components/Category/renderContent.jsx","features/category/components/Category/index.jsx","features/category/hooks/usePage.js","components/Sidebar/Menu.jsx","features/entities/categories/hooks/useCategories.js","components/Sidebar/index.jsx","components/templates/HomeTemplate.jsx","pages/_routes.js","pages/index.jsx","pages/cart.jsx","pages/404.jsx","pages/_app.jsx","shared/lib/store/rootReducer.js","shared/lib/store/index.js","index.jsx","features/cart/components/CartTable/Product.module.scss","features/category/components/Category/Category.module.scss","features/cart/components/CartTable/CartTable.module.scss","components/Sidebar/Menu.module.scss","components/templates/HomeTemplate.module.scss","components/Redirector/Redirector.module.scss","components/Header/Controls.module.scss","components/Header/Logo.module.scss","components/Header/Header.module.scss","components/Announcement/Announcement.module.scss","components/Pagination/Pagination.module.scss","components/Loader/Loader.module.scss","components/Book/Book.module.scss","components/Sidebar/Sidebar.module.scss","styles/Cart.module.scss"],"names":["ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","Redirector","message","className","styles","to","Controls","controls","src","cart","alt","Logo","logo","Header","header","CommonTemplate","children","Announcement","announcement","banner","IDLE_STATUS","LOADING_STATUS","SUCCEEDED_STATUS","document","body","addEventListener","classList","add","event","code","remove","instance","axios","create","baseURL","process","limitDescription","entity","limit","Object","values","map","item","description","slice","trim","reduce","accumulator","currentValue","id","adapter","createEntityAdapter","sortComparer","a","b","getSelectors","state","entities","books","selectAllBooks","selectById","selectIds","selectEntities","selectAll","categoryEntity","selectTotal","schema","Entity","bookEntity","category","fetchBooks","createAsyncThunk","params","get","res","normalized","normalize","data","rows","total","count","fetchBook","initialState","getInitialState","status","createSlice","name","extraReducers","pending","fulfilled","action","payload","editedBooks","addMany","categories","selectAllCategories","selectTotalCategories","selectCategoriesStatus","fetchCategories","condition","_","getState","setAll","persistReducer","key","storage","whitelist","keyPrefix","reducer","entitiesReducer","combineReducers","booksReducer","categoriesReducer","selectCategoryId","current","selectPageId","page","selectPageVisibility","isVisible","selectPagination","pagination","selectTotalBooks","createSelector","categoryId","totalBooks","selectPage","pageId","pageShape","bookIds","pages","selectPageStatus","selectBooks","filter","book","includes","fetchPage","dispatch","sortBy","reducers","categoryChanged","pageChanged","pageVisibilityChanged","meta","arg","keys","Number","actions","Pagination","pageSize","onChange","locale","defaultProps","ids","selectStatus","selectTotalItems","length","selectQuantity","items","quantity","selectProducts","sort","indexOf","selectSubtotalPrice","productId","products","product","find","Math","round","price","selectTotalPrice","totalPrice","fetchItems","itemIds","Promise","all","itemToggled","unshift","itemRemoved","quantityChanged","itemId","cartCleared","Loader","loader","color","size","Product","cover","author","title","useDispatch","useSelector","subtotalPrice","useState","value","setValue","onItemRemove","onValueChange","e","currentTarget","onQuantityChange","type","useProduct","content","removeButton","onClick","onBlur","onKeyDown","CartTable","history","useHistory","addToast","useToasts","totalItems","isLoading","isCartEmpty","onOrderClick","confirmAlert","buttons","label","push","appearance","useCart","table","button","Book","isAddedToCart","useMemo","onItemToggle","useItem","style","boxShadow","height","renderContent","Array","xs","lg","Category","noBooks","onPageChange","scroller","onVisibilityChange","usePage","partialVisibility","paginationCol","cx","classNames","bind","Menu","totalCategories","useCategories","isPageVisible","onCategoryChange","smooth","useCategory","menu","active","Sidebar","sidebar","HomeTemplate","main","path","exact","component","Helmet","wrapper","App","autoDismiss","defaultTitle","titleTemplate","renderRoutes","routes","rootReducer","cartReducer","categoryReducer","persistConfig","persistedReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","render","StrictMode","loading","getElementById","module","exports"],"mappings":"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","file":"static/js/main.18d7ab98.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport function ScrollToTop() {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport styles from \"./Redirector.module.scss\";\r\n\r\nexport function Redirector({ message }) {\r\n  return (\r\n    <>\r\n      <p className={styles.message}>{message}</p>\r\n      <Link to=\"/\">Go Home</Link>\r\n    </>\r\n  );\r\n}\r\n\r\nRedirector.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/cart.ffee8bd2.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport cart from \"@assets/cart.svg\";\r\nimport styles from \"./Controls.module.scss\";\r\n\r\nexport function Controls() {\r\n  return (\r\n    <nav className={styles.controls}>\r\n      <Link to=\"/cart\">\r\n        <img src={cart} alt=\"\" />\r\n      </Link>\r\n    </nav>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport styles from \"./Logo.module.scss\";\r\n\r\nexport function Logo() {\r\n  return (\r\n    <div className={styles.logo}>\r\n      <Link to=\"/\">Bookstore</Link>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { Controls } from \"./Controls\";\r\nimport { Logo } from \"./Logo\";\r\nimport styles from \"./Header.module.scss\";\r\n\r\nexport function Header() {\r\n  return (\r\n    <header className={styles.header}>\r\n      <Logo />\r\n      <Controls />\r\n    </header>\r\n  );\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { Grid } from \"react-flexbox-grid\";\r\n\r\nimport { Header } from \"@components/Header\";\r\n\r\nexport function CommonTemplate({ children }) {\r\n  return (\r\n    <Grid>\r\n      <Header />\r\n      <main>{children}</main>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nCommonTemplate.propTypes = {\r\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/banner.f8c14c15.png\";","import React from \"react\";\r\n\r\nimport banner from \"@assets/banner.png\";\r\nimport styles from \"./Announcement.module.scss\";\r\n\r\nexport function Announcement() {\r\n  return (\r\n    <div className={styles.announcement}>\r\n      <img src={banner} alt=\"\" />\r\n    </div>\r\n  );\r\n}\r\n","export const IDLE_STATUS = \"idle\";\r\nexport const LOADING_STATUS = \"loading\";\r\nexport const SUCCEEDED_STATUS = \"succeeded\";\r\nexport const FAILED_STATUS = \"failed\";\r\n","import \"./style.css\";\r\n\r\ndocument.body.addEventListener(\"mousedown\", () => {\r\n  document.body.classList.add(\"using-mouse\");\r\n});\r\n\r\ndocument.body.addEventListener(\"keydown\", (event) => {\r\n  if (event.code === \"Tab\") {\r\n    document.body.classList.remove(\"using-mouse\");\r\n  }\r\n});\r\n","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n});\r\n\r\nexport { instance as axios };\r\n","export const limitDescription = (entity, limit) => {\r\n  const processed = Object.values(entity).map((item) => {\r\n    item.description = `${item.description.slice(0, limit).trim()}...`;\r\n    return item;\r\n  });\r\n\r\n  return processed.reduce((accumulator, currentValue) => {\r\n    accumulator[currentValue.id] = currentValue;\r\n    return accumulator;\r\n  }, {});\r\n};\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from \"@reduxjs/toolkit\";\r\nimport { normalize, schema } from \"normalizr\";\r\n\r\nimport {\r\n  IDLE_STATUS,\r\n  LOADING_STATUS,\r\n  SUCCEEDED_STATUS,\r\n} from \"@shared/constants\";\r\nimport { axios } from \"@shared/lib\";\r\nimport { limitDescription } from \"./lib\";\r\n\r\nconst adapter = createEntityAdapter({\r\n  sortComparer: (a, b) => b.id - a.id,\r\n});\r\n\r\nexport const {\r\n  selectById: selectBookById,\r\n  selectIds: selectBookIds,\r\n  selectEntities: selectBookEntities,\r\n  selectAll: selectAllBooks,\r\n  selectTotal: selectTotalBooks,\r\n} = adapter.getSelectors((state) => state.entities.books);\r\n\r\nconst categoryEntity = new schema.Entity(\"categories\");\r\nconst bookEntity = new schema.Entity(\"books\", {\r\n  category: categoryEntity,\r\n});\r\n\r\nexport const fetchBooks = createAsyncThunk(\r\n  \"entities/fetchBooks\",\r\n  async (params) => {\r\n    const res = await axios.get(\"/books\", { params });\r\n    const normalized = normalize(res.data.rows, [bookEntity]);\r\n\r\n    return {\r\n      total: res.data.count,\r\n      entities: normalized.entities,\r\n    };\r\n  }\r\n);\r\n\r\nexport const fetchBook = createAsyncThunk(\"entities/fetchBook\", async (id) => {\r\n  const res = await axios.get(`/books/${id}`);\r\n  const normalized = normalize(res.data, bookEntity);\r\n\r\n  return normalized.entities;\r\n});\r\n\r\nconst initialState = adapter.getInitialState({\r\n  status: IDLE_STATUS,\r\n});\r\n\r\nconst slice = createSlice({\r\n  name: \"entities\",\r\n  initialState,\r\n  extraReducers: {\r\n    [fetchBooks.pending]: (state) => {\r\n      state.status = LOADING_STATUS;\r\n    },\r\n    [fetchBooks.fulfilled]: (state, action) => {\r\n      state.status = SUCCEEDED_STATUS;\r\n      const { books = {} } = action.payload.entities;\r\n\r\n      const editedBooks = limitDescription(books, 100);\r\n      adapter.addMany(state, editedBooks);\r\n    },\r\n    [fetchBook.pending]: (state) => {\r\n      state.status = LOADING_STATUS;\r\n    },\r\n    [fetchBook.fulfilled]: (state, action) => {\r\n      state.status = SUCCEEDED_STATUS;\r\n      const { books } = action.payload;\r\n\r\n      const editedBooks = limitDescription(books, 100);\r\n      adapter.addMany(state, editedBooks);\r\n    },\r\n  },\r\n});\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from \"@reduxjs/toolkit\";\r\nimport { persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport {\r\n  IDLE_STATUS,\r\n  LOADING_STATUS,\r\n  SUCCEEDED_STATUS,\r\n} from \"@shared/constants\";\r\nimport { axios } from \"@shared/lib\";\r\nimport { fetchBooks, fetchBook } from \"../books\";\r\n\r\nconst adapter = createEntityAdapter();\r\n\r\nexport const {\r\n  selectById: selectCategoryById,\r\n  selectIds: selectCategoryIds,\r\n  selectEntities: selectCategoryEntities,\r\n  selectAll: selectAllCategories,\r\n  selectTotal: selectTotalCategories,\r\n} = adapter.getSelectors((state) => state.entities.categories);\r\n\r\nexport const selectCategoriesStatus = (state) =>\r\n  state.entities.categories.status;\r\n\r\nexport const fetchCategories = createAsyncThunk(\r\n  \"entities/fetchCategories\",\r\n  async () => {\r\n    const res = await axios.get(\"/categories?limit=100\");\r\n    return res.data.rows;\r\n  },\r\n  {\r\n    condition: (_, { getState }) => {\r\n      const status = selectCategoriesStatus(getState());\r\n\r\n      if (status === LOADING_STATUS || status === SUCCEEDED_STATUS) {\r\n        return false;\r\n      }\r\n    },\r\n  }\r\n);\r\n\r\nconst initialState = adapter.getInitialState({\r\n  status: IDLE_STATUS,\r\n});\r\n\r\nconst slice = createSlice({\r\n  name: \"entities\",\r\n  initialState,\r\n  extraReducers: {\r\n    [fetchCategories.pending]: (state) => {\r\n      state.status = LOADING_STATUS;\r\n    },\r\n    [fetchCategories.fulfilled]: (state, action) => {\r\n      state.status = SUCCEEDED_STATUS;\r\n      adapter.setAll(state, action.payload);\r\n    },\r\n    [fetchBooks.fulfilled]: (state, action) => {\r\n      const { categories = {} } = action.payload.entities;\r\n      adapter.addMany(state, categories);\r\n    },\r\n    [fetchBook.fulfilled]: (state, action) => {\r\n      const { categories } = action.payload;\r\n      adapter.addMany(state, categories);\r\n    },\r\n  },\r\n});\r\n\r\nexport default persistReducer(\r\n  {\r\n    key: \"categories\",\r\n    storage,\r\n    whitelist: [\"ids\", \"entities\"],\r\n    keyPrefix: \"bookstore:\",\r\n  },\r\n  slice.reducer\r\n);\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\nimport { booksReducer } from \"./books\";\r\nimport { categoriesReducer } from \"./categories\";\r\n\r\nexport * from \"./books\";\r\nexport * from \"./categories\";\r\n\r\nexport const entitiesReducer = combineReducers({\r\n  books: booksReducer,\r\n  categories: categoriesReducer,\r\n});\r\n","import { createSelector } from \"@reduxjs/toolkit\";\r\n\r\nimport { selectAllBooks } from \"@features/entities\";\r\nimport { LOADING_STATUS } from \"@shared/constants\";\r\n\r\nexport const selectCategoryId = (state) => state.category.current;\r\nexport const selectPageId = (state) => state.category.page;\r\nexport const selectPageVisibility = (state) => state.category.isVisible;\r\nexport const selectPagination = (state) => state.category.pagination;\r\n\r\nexport const selectTotalBooks = createSelector(\r\n  selectPagination,\r\n  selectCategoryId,\r\n  (pagination, categoryId) => {\r\n    if (pagination[categoryId]) {\r\n      return pagination[categoryId].totalBooks;\r\n    }\r\n  }\r\n);\r\n\r\nexport const selectPage = createSelector(\r\n  selectPagination,\r\n  selectCategoryId,\r\n  selectPageId,\r\n  (pagination, categoryId, pageId) => {\r\n    const pageShape = {\r\n      bookIds: [],\r\n      status: LOADING_STATUS,\r\n    };\r\n\r\n    return pagination[categoryId]?.pages[pageId] || pageShape;\r\n  }\r\n);\r\n\r\nexport const selectPageStatus = createSelector(\r\n  selectPage,\r\n  (page) => page.status\r\n);\r\n\r\nexport const selectBooks = createSelector(\r\n  selectPage,\r\n  selectAllBooks,\r\n  (page, books) => {\r\n    const { bookIds } = page;\r\n    return books.filter((book) => bookIds.includes(book.id));\r\n  }\r\n);\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport { fetchBooks } from \"@features/entities\";\r\nimport { LOADING_STATUS, SUCCEEDED_STATUS } from \"@shared/constants\";\r\nimport { selectPageStatus } from \"./selectors\";\r\n\r\nexport const fetchPage = createAsyncThunk(\r\n  \"category/fetchPage\",\r\n  async ({ categoryId, page }, { dispatch }) => {\r\n    const params = {\r\n      limit: 6,\r\n      sortBy: \"DESC\",\r\n      categoryId,\r\n      page,\r\n    };\r\n\r\n    const res = await dispatch(fetchBooks(params));\r\n    const { total, entities } = res.payload;\r\n\r\n    return {\r\n      total,\r\n      books: entities.books,\r\n    };\r\n  },\r\n  {\r\n    condition: (_, { getState }) => {\r\n      const status = selectPageStatus(getState());\r\n\r\n      if (status === SUCCEEDED_STATUS) {\r\n        return false;\r\n      }\r\n    },\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  current: 1,\r\n  page: 1,\r\n  isVisible: false,\r\n  pagination: {},\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"category\",\r\n  initialState,\r\n  reducers: {\r\n    categoryChanged: (state, action) => {\r\n      if (state.current !== action.payload) {\r\n        state.page = initialState.page;\r\n        state.current = action.payload;\r\n      }\r\n    },\r\n    pageChanged: (state, action) => {\r\n      state.page = action.payload;\r\n    },\r\n    pageVisibilityChanged: (state, action) => {\r\n      state.isVisible = action.payload;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [fetchPage.pending]: (state, action) => {\r\n      const { pagination } = state;\r\n      const { categoryId, page } = action.meta.arg;\r\n\r\n      if (!pagination[categoryId]) {\r\n        pagination[categoryId] = { totalBooks: 0, pages: {} };\r\n      }\r\n\r\n      pagination[categoryId].pages[page] = {\r\n        bookIds: [],\r\n        status: LOADING_STATUS,\r\n      };\r\n    },\r\n    [fetchPage.fulfilled]: (state, action) => {\r\n      const { pagination } = state;\r\n      const { categoryId, page } = action.meta.arg;\r\n      const { total, books = {} } = action.payload;\r\n\r\n      pagination[categoryId].totalBooks = total;\r\n      pagination[categoryId].pages[page].bookIds = Object.keys(books).map(\r\n        Number\r\n      );\r\n      pagination[categoryId].pages[page].status = SUCCEEDED_STATUS;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  categoryChanged,\r\n  pageChanged,\r\n  pageVisibilityChanged,\r\n} = slice.actions;\r\n\r\nexport * from \"./selectors\";\r\n\r\nexport default slice.reducer;\r\n","import \"rc-pagination/assets/index.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport RcPagination from \"rc-pagination\";\r\nimport locale from \"rc-pagination/es/locale/en_US\";\r\nimport React from \"react\";\r\n\r\nimport styles from \"./Pagination.module.scss\";\r\n\r\nexport function Pagination({ current, total, pageSize, onChange }) {\r\n  return (\r\n    <RcPagination\r\n      className={styles.pagination}\r\n      current={current}\r\n      total={total}\r\n      pageSize={pageSize}\r\n      locale={locale}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n\r\nPagination.propTypes = {\r\n  current: PropTypes.number.isRequired,\r\n  total: PropTypes.number,\r\n  pageSize: PropTypes.number.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nPagination.defaultProps = {\r\n  total: 0,\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { scroller } from \"react-scroll\";\r\n\r\nimport {\r\n  categoryChanged,\r\n  selectCategoryId,\r\n  selectPageVisibility,\r\n} from \"../categorySlice\";\r\n\r\nexport const useCategory = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const categoryId = useSelector(selectCategoryId);\r\n  const isPageVisible = useSelector(selectPageVisibility);\r\n\r\n  const handleCategoryChange = (id) => {\r\n    dispatch(categoryChanged(id));\r\n\r\n    if (!isPageVisible) {\r\n      scroller.scrollTo(\"CategoryContent\", { smooth: true });\r\n    }\r\n  };\r\n\r\n  return {\r\n    categoryId,\r\n    onCategoryChange: handleCategoryChange,\r\n  };\r\n};\r\n","import { createSelector } from \"@reduxjs/toolkit\";\r\n\r\nimport { selectAllBooks } from \"@features/entities\";\r\n\r\nexport const selectIds = (state) => state.cart.ids;\r\nexport const selectStatus = (state) => state.cart.status;\r\n\r\nexport const selectTotalItems = createSelector(selectIds, (ids) => ids.length);\r\n\r\nexport const selectQuantity = createSelector(\r\n  (state, id) => state.cart.items[id],\r\n  (item) => item.quantity\r\n);\r\n\r\nexport const selectProducts = createSelector(\r\n  selectIds,\r\n  selectAllBooks,\r\n  (ids, books) => {\r\n    const matchedItems = books.filter((book) => ids.includes(book.id));\r\n    return matchedItems.sort((a, b) => ids.indexOf(a.id) - ids.indexOf(b.id));\r\n  }\r\n);\r\n\r\nexport const selectSubtotalPrice = createSelector(\r\n  selectQuantity,\r\n  selectProducts,\r\n  (_, productId) => productId,\r\n  (quantity, products, productId) => {\r\n    const product = products.find((item) => item.id === productId);\r\n\r\n    if (product) {\r\n      return Math.round(quantity * product.price * 100) / 100;\r\n    }\r\n  }\r\n);\r\n\r\nexport const selectTotalPrice = createSelector(\r\n  selectIds,\r\n  (state) => state,\r\n  (ids, state) => {\r\n    const totalPrice = ids.reduce((accumulator, currentValue) => {\r\n      const subtotalPrice = selectSubtotalPrice(state, currentValue);\r\n      return accumulator + subtotalPrice;\r\n    }, 0);\r\n\r\n    return Math.round(totalPrice * 100) / 100;\r\n  }\r\n);\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport { fetchBook } from \"@features/entities\";\r\nimport {\r\n  IDLE_STATUS,\r\n  LOADING_STATUS,\r\n  SUCCEEDED_STATUS,\r\n} from \"@shared/constants\";\r\nimport { selectIds, selectStatus } from \"./selectors\";\r\n\r\nexport const fetchItems = createAsyncThunk(\r\n  \"cart/fetchItems\",\r\n  async (_, { dispatch, getState }) => {\r\n    const itemIds = selectIds(getState());\r\n\r\n    return Promise.all(\r\n      itemIds.map(async (id) => {\r\n        await dispatch(fetchBook(id));\r\n      })\r\n    );\r\n  },\r\n  {\r\n    condition: (_, { getState }) => {\r\n      const status = selectStatus(getState());\r\n\r\n      if (status === SUCCEEDED_STATUS) {\r\n        return false;\r\n      }\r\n    },\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  ids: [],\r\n  items: {},\r\n  status: IDLE_STATUS,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"cart\",\r\n  initialState,\r\n  reducers: {\r\n    itemToggled: (state, action) => {\r\n      if (state.items[action.payload]) {\r\n        delete state.items[action.payload];\r\n        state.ids = state.ids.filter((id) => id !== action.payload);\r\n        return;\r\n      }\r\n\r\n      state.items[action.payload] = { id: action.payload, quantity: 1 };\r\n      state.ids.unshift(action.payload);\r\n    },\r\n    itemRemoved: (state, action) => {\r\n      delete state.items[action.payload];\r\n      state.ids = state.ids.filter((id) => id !== action.payload);\r\n    },\r\n    quantityChanged: (state, action) => {\r\n      const { itemId, quantity } = action.payload;\r\n\r\n      if (quantity <= 0) {\r\n        delete state.items[itemId];\r\n        state.ids = state.ids.filter((id) => id !== itemId);\r\n        return;\r\n      }\r\n\r\n      state.items[itemId].quantity = Number(quantity);\r\n    },\r\n    cartCleared: (state) => {\r\n      state.items = {};\r\n      state.ids = [];\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [fetchItems.pending]: (state) => {\r\n      state.status = LOADING_STATUS;\r\n    },\r\n    [fetchItems.fulfilled]: (state) => {\r\n      state.status = SUCCEEDED_STATUS;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  itemToggled,\r\n  itemRemoved,\r\n  quantityChanged,\r\n  cartCleared,\r\n} = slice.actions;\r\n\r\nexport * from \"./selectors\";\r\n\r\nexport default persistReducer(\r\n  {\r\n    key: \"cart\",\r\n    storage,\r\n    whitelist: [\"ids\", \"items\"],\r\n    keyPrefix: \"bookstore:\",\r\n  },\r\n  slice.reducer\r\n);\r\n","import React from \"react\";\r\nimport MoonLoader from \"react-spinners/MoonLoader\";\r\n\r\nimport styles from \"./Loader.module.scss\";\r\n\r\nexport function Loader() {\r\n  return (\r\n    <div className={styles.loader}>\r\n      <MoonLoader color=\"#4c3db2\" size={40} />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport { IDLE_STATUS, LOADING_STATUS } from \"@shared/constants\";\r\nimport { confirmAlert } from \"@shared/lib\";\r\nimport {\r\n  fetchItems,\r\n  cartCleared,\r\n  selectProducts,\r\n  selectStatus,\r\n  selectTotalItems,\r\n  selectTotalPrice,\r\n} from \"../cartSlice\";\r\n\r\nexport const useCart = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { addToast } = useToasts();\r\n\r\n  const items = useSelector(selectProducts);\r\n  const status = useSelector(selectStatus);\r\n  const totalItems = useSelector(selectTotalItems);\r\n  const totalPrice = useSelector(selectTotalPrice);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchItems());\r\n  }, [dispatch]);\r\n\r\n  const handleOrderClick = () => {\r\n    confirmAlert({\r\n      message: \"Are you sure you want to order?\",\r\n      buttons: [\r\n        {\r\n          label: \"Yes\",\r\n          onClick: () => {\r\n            history.push(\"/\");\r\n            dispatch(cartCleared());\r\n            addToast(\"Order confirmed\", { appearance: \"success\" });\r\n          },\r\n        },\r\n        {\r\n          label: \"No\",\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  return {\r\n    items,\r\n    totalPrice,\r\n    isLoading: status === IDLE_STATUS || status === LOADING_STATUS,\r\n    isCartEmpty: !totalItems,\r\n    onOrderClick: handleOrderClick,\r\n  };\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nimport { useProduct } from \"../../hooks\";\r\nimport styles from \"./Product.module.scss\";\r\n\r\nexport function Product({ id, cover, author, title, price }) {\r\n  const {\r\n    value,\r\n    subtotalPrice,\r\n    onItemRemove,\r\n    onValueChange,\r\n    onQuantityChange,\r\n  } = useProduct(id);\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <div className={styles.product}>\r\n          <img src={cover} alt=\"\" />\r\n          <div className={styles.content}>\r\n            <p className={styles.author}>{author.name}</p>\r\n            <h5 className={styles.title}>{title}</h5>\r\n            <p className={styles.price}>{`$${price}`}</p>\r\n            <button\r\n              className={styles.removeButton}\r\n              type=\"button\"\r\n              onClick={onItemRemove}\r\n            >\r\n              Remove\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </td>\r\n      <td>\r\n        <input\r\n          type=\"number\"\r\n          value={value}\r\n          onChange={onValueChange}\r\n          onBlur={onQuantityChange}\r\n          onKeyDown={onQuantityChange}\r\n        />\r\n      </td>\r\n      <td>{`$${subtotalPrice}`}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nProduct.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  cover: PropTypes.string.isRequired,\r\n  author: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  price: PropTypes.string.isRequired,\r\n};\r\n","import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport {\r\n  itemRemoved,\r\n  quantityChanged,\r\n  selectQuantity,\r\n  selectSubtotalPrice,\r\n} from \"../cartSlice\";\r\n\r\nexport const useProduct = (productId) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const quantity = useSelector((state) => selectQuantity(state, productId));\r\n  const subtotalPrice = useSelector((state) =>\r\n    selectSubtotalPrice(state, productId)\r\n  );\r\n\r\n  const [value, setValue] = useState(quantity);\r\n\r\n  const handleItemRemove = () => {\r\n    dispatch(itemRemoved(productId));\r\n  };\r\n\r\n  const handleValueChange = (e) => {\r\n    if (e.currentTarget.value < 0) {\r\n      return;\r\n    }\r\n\r\n    setValue(e.currentTarget.value);\r\n  };\r\n\r\n  const handleQuantityChange = (e) => {\r\n    if (e.type === \"keydown\" && e.key !== \"Enter\") {\r\n      return;\r\n    }\r\n\r\n    dispatch(quantityChanged({ itemId: productId, quantity: value }));\r\n  };\r\n\r\n  return {\r\n    value,\r\n    subtotalPrice,\r\n    onItemRemove: handleItemRemove,\r\n    onValueChange: handleValueChange,\r\n    onQuantityChange: handleQuantityChange,\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nimport { Loader } from \"@components/Loader\";\r\nimport { Redirector } from \"@components/Redirector\";\r\nimport { useCart } from \"../../hooks\";\r\nimport { Product } from \"./Product\";\r\nimport styles from \"./CartTable.module.scss\";\r\n\r\nexport function CartTable() {\r\n  const { items, totalPrice, isLoading, isCartEmpty, onOrderClick } = useCart();\r\n\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (isCartEmpty) {\r\n    return <Redirector message=\"Cart is empty\" />;\r\n  }\r\n\r\n  return (\r\n    <table className={styles.table}>\r\n      <thead>\r\n        <tr>\r\n          <th>Product</th>\r\n          <th>Quantity</th>\r\n          <th>Subtotal</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items.map((item) => (\r\n          <Product\r\n            id={item.id}\r\n            cover={item.cover}\r\n            author={item.author}\r\n            title={item.title}\r\n            price={item.price}\r\n            key={item.id}\r\n          />\r\n        ))}\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td />\r\n          <td>Total</td>\r\n          <td>{`$${totalPrice}`}</td>\r\n        </tr>\r\n        <tr>\r\n          <td />\r\n          <td />\r\n          <td>\r\n            <button\r\n              className={styles.button}\r\n              type=\"button\"\r\n              onClick={onOrderClick}\r\n            >\r\n              Order\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nimport { useItem } from \"@features/cart\";\r\nimport { Loader } from \"./Loader\";\r\nimport styles from \"./Book.module.scss\";\r\n\r\nexport function Book({ id, cover, author, title, description, price }) {\r\n  const { isAddedToCart, onItemToggle } = useItem(id);\r\n\r\n  return (\r\n    <article className={styles.book}>\r\n      <div className={styles.cover}>\r\n        <img src={cover} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <p className={styles.author}>{author.name}</p>\r\n        <h5 className={styles.title}>{title}</h5>\r\n        <p className={styles.description}>{description}</p>\r\n        <p className={styles.price}>{`$${price}`}</p>\r\n        <button className={styles.button} type=\"button\" onClick={onItemToggle}>\r\n          {isAddedToCart ? \"Added to cart\" : \"Buy now\"}\r\n        </button>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nBook.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  cover: PropTypes.string.isRequired,\r\n  author: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  price: PropTypes.string.isRequired,\r\n};\r\n\r\nBook.Loader = Loader;\r\n","import { useMemo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { itemToggled, selectIds } from \"../cartSlice\";\r\n\r\nexport const useItem = (id) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const itemIds = useSelector(selectIds);\r\n  const isAddedToCart = useMemo(() => itemIds.includes(id), [id, itemIds]);\r\n\r\n  const handleItemToggle = () => {\r\n    dispatch(itemToggled(id));\r\n  };\r\n\r\n  return {\r\n    isAddedToCart,\r\n    onItemToggle: handleItemToggle,\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\nimport styles from \"./Book.module.scss\";\r\n\r\nexport function Loader() {\r\n  return (\r\n    <article className={styles.book}>\r\n      <div className={styles.cover} style={{ boxShadow: \"none\" }}>\r\n        <Skeleton height=\"100%\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <p className={styles.author}>\r\n          <Skeleton />\r\n        </p>\r\n        <h5 className={styles.title}>\r\n          <Skeleton />\r\n        </h5>\r\n        <p className={styles.description}>\r\n          <Skeleton count={3} />\r\n        </p>\r\n        <p className={styles.price}>\r\n          <Skeleton />\r\n        </p>\r\n\r\n        <Skeleton height={45} />\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Col } from \"react-flexbox-grid\";\r\n\r\nimport { Book } from \"@components/Book\";\r\n\r\nexport const renderContent = ({ books, isLoading, pageSize }) => {\r\n  let items = books.map((book) => (\r\n    <Book\r\n      id={book.id}\r\n      cover={book.cover}\r\n      author={book.author}\r\n      title={book.title}\r\n      description={book.description}\r\n      price={book.price}\r\n      key={book.id}\r\n    />\r\n  ));\r\n\r\n  if (isLoading) {\r\n    items = [...Array(pageSize).keys()].map((key) => <Book.Loader key={key} />);\r\n  }\r\n\r\n  return items.map((item) => (\r\n    <Col xs={12} lg={6} key={item.key}>\r\n      {item}\r\n    </Col>\r\n  ));\r\n};\r\n","import React from \"react\";\r\nimport { Row, Col } from \"react-flexbox-grid\";\r\nimport { Element } from \"react-scroll\";\r\nimport VisibilitySensor from \"react-visibility-sensor\";\r\n\r\nimport { Pagination } from \"@components/Pagination\";\r\nimport { usePage } from \"../../hooks\";\r\nimport { renderContent } from \"./renderContent\";\r\nimport styles from \"./Category.module.scss\";\r\n\r\nexport function Category() {\r\n  const {\r\n    books,\r\n    totalBooks,\r\n    isLoading,\r\n    pageId,\r\n    noBooks,\r\n    pageSize,\r\n    onPageChange,\r\n    onVisibilityChange,\r\n  } = usePage();\r\n\r\n  if (noBooks) {\r\n    return <p className={styles.noBooks}>No books</p>;\r\n  }\r\n\r\n  return (\r\n    <VisibilitySensor partialVisibility onChange={onVisibilityChange}>\r\n      <Row>\r\n        <Element name=\"CategoryContent\" />\r\n        {renderContent({ books, isLoading, pageSize })}\r\n\r\n        {totalBooks ? (\r\n          <Col className={styles.paginationCol} xs={12} lg={6}>\r\n            <div className={styles.pagination}>\r\n              <Pagination\r\n                current={pageId}\r\n                total={totalBooks}\r\n                pageSize={pageSize}\r\n                onChange={onPageChange}\r\n              />\r\n            </div>\r\n          </Col>\r\n        ) : null}\r\n      </Row>\r\n    </VisibilitySensor>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { scroller } from \"react-scroll\";\r\n\r\nimport { LOADING_STATUS, SUCCEEDED_STATUS } from \"@shared/constants\";\r\nimport {\r\n  fetchPage,\r\n  pageChanged,\r\n  pageVisibilityChanged,\r\n  selectCategoryId,\r\n  selectPageId,\r\n  selectTotalBooks,\r\n  selectPageStatus,\r\n  selectBooks,\r\n} from \"../categorySlice\";\r\n\r\nexport const usePage = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const categoryId = useSelector(selectCategoryId);\r\n  const pageId = useSelector(selectPageId);\r\n  const totalBooks = useSelector(selectTotalBooks);\r\n  const books = useSelector(selectBooks);\r\n  const status = useSelector(selectPageStatus);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPage({ categoryId, page: pageId }));\r\n  }, [dispatch, categoryId, pageId]);\r\n\r\n  const handlePageChange = (id) => {\r\n    dispatch(pageChanged(id));\r\n    scroller.scrollTo(\"CategoryContent\");\r\n  };\r\n\r\n  const handleVisibilityChange = (isVisible) => {\r\n    dispatch(pageVisibilityChanged(isVisible));\r\n  };\r\n\r\n  return {\r\n    books,\r\n    totalBooks,\r\n    isLoading: status === LOADING_STATUS,\r\n    pageId,\r\n    noBooks: status === SUCCEEDED_STATUS && !totalBooks,\r\n    pageSize: 6,\r\n    onPageChange: handlePageChange,\r\n    onVisibilityChange: handleVisibilityChange,\r\n  };\r\n};\r\n","import classNames from \"classnames/bind\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { useCategory } from \"@features/category\";\r\nimport { useCategories } from \"@features/entities\";\r\nimport { Loader } from \"../Loader\";\r\nimport styles from \"./Menu.module.scss\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nexport function Menu() {\r\n  const { categories, isLoading } = useCategories();\r\n  const { categoryId, onCategoryChange } = useCategory();\r\n\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <ul className={styles.menu}>\r\n      {categories.map((category) => (\r\n        <li\r\n          className={cx(\"item\", { active: category.id === categoryId })}\r\n          key={category.id}\r\n        >\r\n          <Link to=\"/\" onClick={() => onCategoryChange(category.id)}>\r\n            {category.name}\r\n          </Link>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { LOADING_STATUS } from \"@shared/constants\";\r\nimport {\r\n  fetchCategories,\r\n  selectAllCategories,\r\n  selectTotalCategories,\r\n  selectCategoriesStatus,\r\n} from \"../categoriesSlice\";\r\n\r\nexport const useCategories = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const categories = useSelector(selectAllCategories);\r\n  const totalCategories = useSelector(selectTotalCategories);\r\n  const status = useSelector(selectCategoriesStatus);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchCategories());\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    categories,\r\n    isLoading: status === LOADING_STATUS && !totalCategories,\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nimport { Menu } from \"./Menu\";\r\nimport styles from \"./Sidebar.module.scss\";\r\n\r\nexport function Sidebar() {\r\n  return (\r\n    <aside className={styles.sidebar}>\r\n      <Menu />\r\n    </aside>\r\n  );\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { Grid, Row, Col } from \"react-flexbox-grid\";\r\n\r\nimport { Announcement } from \"@components/Announcement\";\r\nimport { Header } from \"@components/Header\";\r\nimport { Sidebar } from \"@components/Sidebar\";\r\nimport styles from \"./HomeTemplate.module.scss\";\r\n\r\nexport function HomeTemplate({ children }) {\r\n  return (\r\n    <Grid>\r\n      <Header />\r\n\r\n      <section className={styles.announcement}>\r\n        <Announcement />\r\n      </section>\r\n\r\n      <section>\r\n        <Row>\r\n          <Col lg={2}>\r\n            <Sidebar />\r\n          </Col>\r\n          <Col lg={10}>\r\n            <main className={styles.main}>{children}</main>\r\n          </Col>\r\n        </Row>\r\n      </section>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nHomeTemplate.propTypes = {\r\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\r\n};\r\n","import NotFound from \"./404\";\r\nimport Cart from \"./cart\";\r\nimport Home from \"./index\";\r\n\r\nexport default [\r\n  {\r\n    path: \"/\",\r\n    exact: true,\r\n    component: Home,\r\n  },\r\n  {\r\n    path: \"/cart\",\r\n    exact: true,\r\n    component: Cart,\r\n  },\r\n  {\r\n    path: \"*\",\r\n    component: NotFound,\r\n  },\r\n];\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { HomeTemplate } from \"@components/templates\";\r\nimport { Category } from \"@features/category\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <HomeTemplate>\r\n      <Helmet title=\"Home\" />\r\n\r\n      <Category />\r\n    </HomeTemplate>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { CommonTemplate } from \"@components/templates\";\r\nimport { CartTable } from \"@features/cart\";\r\nimport styles from \"@styles/Cart.module.scss\";\r\n\r\nexport default function Cart() {\r\n  return (\r\n    <CommonTemplate>\r\n      <Helmet title=\"Cart\" />\r\n\r\n      <div className={styles.wrapper}>\r\n        <CartTable />\r\n      </div>\r\n    </CommonTemplate>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { Redirector } from \"@components/Redirector\";\r\nimport { CommonTemplate } from \"@components/templates\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n    <CommonTemplate>\r\n      <Helmet title=\"Not Found\" />\r\n\r\n      <Redirector message=\"404 Not Found\" />\r\n    </CommonTemplate>\r\n  );\r\n}\r\n","import \"@styles/globals.scss\";\r\nimport React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { ToastProvider } from \"react-toast-notifications\";\r\n\r\nimport { ScrollToTop } from \"@components/ScrollToTop\";\r\nimport routes from \"./_routes\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <HashRouter>\r\n      <ScrollToTop />\r\n      <ToastProvider autoDismiss>\r\n        <Helmet defaultTitle=\"bookstore\" titleTemplate=\"%s — bookstore\" />\r\n        {renderRoutes(routes)}\r\n      </ToastProvider>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport { cartReducer } from \"@features/cart\";\r\nimport { categoryReducer } from \"@features/category\";\r\nimport { entitiesReducer } from \"@features/entities\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  cart: cartReducer,\r\n  category: categoryReducer,\r\n  entities: entitiesReducer,\r\n});\r\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport { rootReducer } from \"./rootReducer\";\r\n\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  storage,\r\n  whitelist: [],\r\n  keyPrefix: \"bookstore:\",\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\n\r\nimport App from \"./pages/_app\";\r\nimport { store, persistor } from \"./shared/lib/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product\":\"Product_product__GdqVo\",\"content\":\"Product_content__13g_f\",\"author\":\"Product_author__1yngb\",\"title\":\"Product_title__kloxF\",\"price\":\"Product_price__1DYqS\",\"removeButton\":\"Product_removeButton__1cJly\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noBooks\":\"Category_noBooks__2zk_W\",\"paginationCol\":\"Category_paginationCol__26o8O\",\"pagination\":\"Category_pagination__fkzuh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"CartTable_table__3ekwT\",\"button\":\"CartTable_button__14VoG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"Menu_menu__3LBjz\",\"item\":\"Menu_item__1EIcg\",\"active\":\"Menu_active__tzR5r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"announcement\":\"HomeTemplate_announcement__2vQ6i\",\"main\":\"HomeTemplate_main__1pLve\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Redirector_message__3rc90\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__2HI6Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Logo_logo__2eQyL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__A0Oo4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"announcement\":\"Announcement_announcement__OPfi6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__3ktHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__21QAz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"book\":\"Book_book__MpLob\",\"cover\":\"Book_cover__8rg6F\",\"content\":\"Book_content__3Mi-x\",\"author\":\"Book_author__3v-QM\",\"description\":\"Book_description__1ta-W\",\"title\":\"Book_title__3q_c6\",\"price\":\"Book_price__2nMJ_\",\"button\":\"Book_button__3-Fab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__15icC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Cart_wrapper__3Md1S\"};"],"sourceRoot":""}